<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>All Posts</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
</head>
<body>
  <%- include('../partials/_navbar.ejs') %>
  <h1>All Posts</h1>

<a href="/posts/new">+ Add New Post</a>

  <ul>
    <% if (posts.length === 0) { %>
      <p>No posts yet.</p>
    <% } else { %>
      <% posts.forEach(post => { %>
        <li>
          <h2><a href="/posts/<%= post._id %>"><%= post.title %></a></h2>
          <% if (post.image) { %>
            <img
              src="data:image/jpeg;base64,<%= post.image %>"
              alt="<%= post.title %>"
              style="max-width:200px; border-radius:10px; display:block; margin-bottom:10px;"
            >
          <% } %>
          <% if (post.description) { %>
            <p><%= post.description %></p>
          <% } %>
          <p><strong>Category:</strong> <%= post.category %></p>
          <a href="/posts/<%= post._id%>">add a comment</a>
        </li>
        <hr>
      <% }) %>
    <% } %>
  </ul>
</body>
</html>
